(this["webpackJsonpgithub-folowwers"]=this["webpackJsonpgithub-folowwers"]||[]).push([[0],{48:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var r,o=t(2),a=t.n(o),c=t(20),s=t.n(c),l=(t(48),t(8)),u=t.n(l),i=t(10),d=t(29),f=t(18),h=function(){return Object(f.b)()},p=f.c,v=t(34),b=t(35),g=t(31),j=t(41),m=t(67),w=t(68),O=t(38),x=Object(j.a)({uri:"https://api.github.com/graphql"}),y=Object(O.a)((function(e,n){var t=n.headers;return{headers:Object(g.a)(Object(g.a)({},t),{},{authorization:"Bearer ".concat("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")})}})),P=new m.a({link:y.concat(x),cache:new w.a}),N=t(39),k=t(40),F=Object(k.a)(r||(r=Object(N.a)(["\n  query GetFollowers($user: String!, $cursor: String) {\n    user(login: $user) {\n      followers(first: 30, after: $cursor) {\n        totalCount\n        edges {\n          node {\n            login\n            name\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]))),S=new(function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,[{key:"getFollowers",value:function(){var e=Object(i.a)(u.a.mark((function e(n){var t,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:void 0,e.prev=1,e.next=4,P.query({query:F,variables:{user:n,cursor:t}});case 4:if((r=e.sent)&&r.data){e.next=8;break}throw console.log("response: ",r),new Error("Cannot get followers");case 8:return e.abrupt("return",r.data.user);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}()}],[{key:"getFollowers",value:function(e,n){throw new Error("Method not implemented.")}}]),e}()),C=function(){var e=Object(i.a)(u.a.mark((function e(n,t){var r,o,a,c,s,l,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getFollowers(n,t).catch((function(e){throw e}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return");case 5:return d={names:null===i||void 0===i||null===(r=i.followers)||void 0===r||null===(o=r.edges)||void 0===o?void 0:o.map((function(e){var n,t;return[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.login,null===e||void 0===e||null===(t=e.node)||void 0===t?void 0:t.name]})),endCursor:null===i||void 0===i||null===(a=i.followers)||void 0===a||null===(c=a.pageInfo)||void 0===c?void 0:c.endCursor,hasNextPage:null===i||void 0===i||null===(s=i.followers)||void 0===s||null===(l=s.pageInfo)||void 0===l?void 0:l.hasNextPage},e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),U=t(42),D=t(24),q=Object(D.b)({name:"homePage",initialState:{followersPages:[],user:"",isAccountName:!1,depth:1},reducers:{addUser:function(e,n){e.user=n.payload,e.followersPages=[],e.depth=1},addFollowersPage:function(e,n){e.followersPages=[].concat(Object(U.a)(e.followersPages),[n.payload])},updateDepth:function(e,n){e.depth+=n.payload},updateNameType:function(e,n){e.isAccountName=n.payload}}}),A=function(e){return e.homePage.user},E=function(e){return e.homePage.isAccountName},I=function(e){return e.homePage.depth},$=function(e){var n,t,r;return null===(n=e.homePage)||void 0===n||null===(t=n.followersPages)||void 0===t||null===(r=t[e.homePage.depth-1])||void 0===r?void 0:r.names},B=function(e){var n,t,r,o;return[null===(n=e.homePage.followersPages)||void 0===n||null===(t=n[e.homePage.depth-1])||void 0===t?void 0:t.endCursor,null===(r=e.homePage.followersPages)||void 0===r||null===(o=r[e.homePage.depth-1])||void 0===o?void 0:o.hasNextPage]},L=q.actions,T=L.addUser,G=L.addFollowersPage,J=L.updateDepth,M=L.updateNameType,R=q.reducer,W=t(3);var z=function(){var e=p(A),n=p($),t=p(E),r={"--start-count":30*(p(I)-1)};return Object(W.jsxs)("ol",{className:"followers ".concat(0===(null===n||void 0===n?void 0:n.length)?"followers--empty":""),style:r,children:[0===(null===n||void 0===n?void 0:n.length)&&Object(W.jsxs)("div",{children:["Unfortunately ",e," currently doesn't have any followers \ud83d\ude22"]}),null===n||void 0===n?void 0:n.map((function(e){return Object(W.jsx)("li",{className:"follower ".concat(t&&!e[1]?"follower-empty":""),children:t?e[1]||"- No name specified -":e[0]},e[0])}))]})};var K=function(){var e,n=p(A),t=p(I),r=p(B),o=(e=h(),{setFollowersPage:function(n){return e(G(n))},setDepth:function(n){return e(J(n))}}),a=o.setFollowersPage,c=o.setDepth;return Object(W.jsxs)("div",{className:"pagination-buttons",children:[t>1&&Object(W.jsx)("button",{className:"btn prev",title:"".concat(1+30*(t-2)," - ").concat(30*(t-1)),type:"button",onClick:function(){c(-1)},children:"\u2039 Show previous 30 followers"}),r[1]&&Object(W.jsx)("button",{className:"btn next",title:"".concat(1+30*t," - ").concat(30*(t+1)),type:"button",onClick:function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(n,r[0]);case 2:t=e.sent,console.log("page: nextclick",t),t&&a(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),c(1)},children:"Show more followers \u203a"})]})};function Y(e){var n,t=(n=h(),{setNewUser:function(e){return n(T(e))},setFollowersPage:function(e){return n(G(e))},setNameType:function(e){return n(M(e))}}),r=t.setNewUser,a=t.setFollowersPage,c=t.setNameType,s=Object(o.useRef)(null),l=Object(o.useState)(),f=Object(d.a)(l,2),v=f[0],b=f[1],g=Object(o.useState)(""),j=Object(d.a)(g,2),m=j[0],w=j[1],O=p(E);function x(){return(x=Object(i.a)(u.a.mark((function e(n){var t,o,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("formInput: ",null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.value),a=null===(o=s.current)||void 0===o?void 0:o.value,v!==a){e.next=5;break}return e.abrupt("return");case 5:a&&b(a),a&&r(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){v&&function(){var e=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(v,undefined);case 3:(n=e.sent)&&a(n),w(""),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error 456: ",e.t0),w(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[v]),Object(W.jsxs)("main",{children:[Object(W.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(W.jsx)("input",{className:"input",type:"text",ref:s,placeholder:"Enter github login name"}),Object(W.jsx)("button",{className:"btn btn--primary",children:"Display followers"}),Object(W.jsxs)("div",{className:"checkbox-wpr",children:[Object(W.jsx)("input",{className:"checkbox",type:"checkbox",id:"cb",onChange:function(){c(!O)}}),Object(W.jsx)("label",{className:"",htmlFor:"cb",children:"Login Names"}),Object(W.jsx)("label",{htmlFor:"cb",children:"Account Names"})]})]}),Object(W.jsx)(K,{}),""!==m.toString()?Object(W.jsx)("div",{className:"error-msg",children:m.toString()}):Object(W.jsx)(z,{})]})}t(57);var Z=function(){return Object(W.jsx)(Y,{})},_=Object(D.a)({reducer:{homePage:R}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=t(70);s.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(f.a,{store:_,children:Object(W.jsx)(H.a,{client:P,children:Object(W.jsx)(Z,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.c4f7c61c.chunk.js.map