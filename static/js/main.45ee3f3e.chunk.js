(this["webpackJsonpgithub-folowwers"]=this["webpackJsonpgithub-folowwers"]||[]).push([[0],{48:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var r,o=t(2),a=t.n(o),c=t(20),s=t.n(c),l=(t(48),t(8)),u=t.n(l),i=t(10),d=t(29),f=t(18),h=function(){return Object(f.b)()},p=f.c,v=t(34),b=t(35),g=t(31),j=t(41),w=t(67),m=t(68),x=t(38),O=Object(j.a)({uri:"https://api.github.com/graphql"}),y=Object(x.a)((function(e,n){var t=n.headers;return{headers:Object(g.a)(Object(g.a)({},t),{},{authorization:"Bearer ".concat("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")})}})),N=new w.a({link:y.concat(O),cache:new m.a}),P=t(39),k=t(40),F=Object(k.a)(r||(r=Object(P.a)(["\n  query GetFollowers($user: String!, $cursor: String) {\n    user(login: $user) {\n      followers(first: 30, after: $cursor) {\n        totalCount\n        edges {\n          node {\n            login\n            name\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]))),S=new(function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,[{key:"getFollowers",value:function(){var e=Object(i.a)(u.a.mark((function e(n){var t,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:void 0,e.prev=1,e.next=4,N.query({query:F,variables:{user:n,cursor:t}});case 4:if((r=e.sent)&&r.data){e.next=8;break}throw console.log("response: ",r),new Error("Cannot get followers");case 8:return e.abrupt("return",r.data.user);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}()}],[{key:"getFollowers",value:function(e,n){throw new Error("Method not implemented.")}}]),e}()),C=function(){var e=Object(i.a)(u.a.mark((function e(n,t){var r,o,a,c,s,l,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getFollowers(n,t).catch((function(e){throw e}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return");case 5:return d={names:null===i||void 0===i||null===(r=i.followers)||void 0===r||null===(o=r.edges)||void 0===o?void 0:o.map((function(e){var n,t;return[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.login,null===e||void 0===e||null===(t=e.node)||void 0===t?void 0:t.name]})),endCursor:null===i||void 0===i||null===(a=i.followers)||void 0===a||null===(c=a.pageInfo)||void 0===c?void 0:c.endCursor,hasNextPage:null===i||void 0===i||null===(s=i.followers)||void 0===s||null===(l=s.pageInfo)||void 0===l?void 0:l.hasNextPage},e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),D=t(42),I=t(24),E=Object(I.b)({name:"homePage",initialState:{followersPages:[],user:"",isAccountName:!1,depth:1},reducers:{addUser:function(e,n){e.user=n.payload,e.followersPages=[],e.depth=1},addFollowersPage:function(e,n){e.followersPages=[].concat(Object(D.a)(e.followersPages),[n.payload])},updateDepth:function(e,n){e.depth+=n.payload},updateNameType:function(e,n){e.isAccountName=n.payload}}}),T=function(e){return e.homePage.user},U=function(e){return e.homePage.isAccountName},$=function(e){return e.homePage.depth},q=function(e){var n,t,r;return null===(n=e.homePage)||void 0===n||null===(t=n.followersPages)||void 0===t||null===(r=t[e.homePage.depth-1])||void 0===r?void 0:r.names},A=function(e){var n,t,r,o;return[null===(n=e.homePage.followersPages)||void 0===n||null===(t=n[e.homePage.depth-1])||void 0===t?void 0:t.endCursor,null===(r=e.homePage.followersPages)||void 0===r||null===(o=r[e.homePage.depth-1])||void 0===o?void 0:o.hasNextPage]},B=E.actions,M=B.addUser,J=B.addFollowersPage,L=B.updateDepth,Q=B.updateNameType,W=E.reducer,z=t(3);var G=function(){var e=p(T),n=p(q),t=p(U),r={"--start-count":30*(p($)-1)};return Object(z.jsxs)("ol",{className:"followers ".concat(0===(null===n||void 0===n?void 0:n.length)?"followers--empty":""),style:r,children:[0===(null===n||void 0===n?void 0:n.length)&&Object(z.jsxs)("div",{children:["Unfortunately ",e," currently doesn't have any followers \ud83d\ude22"]}),null===n||void 0===n?void 0:n.map((function(e){return Object(z.jsx)("li",{className:"follower ".concat(t&&!e[1]?"follower-empty":""),children:t?e[1]||"- No name specified -":e[0]},e[0])}))]})};var K=function(){var e,n=p(T),t=p($),r=p(A),o=(e=h(),{setFollowersPage:function(n){return e(J(n))},setDepth:function(n){return e(L(n))}}),a=o.setFollowersPage,c=o.setDepth;return Object(z.jsxs)("div",{className:"pagination-buttons",children:[t>1&&Object(z.jsx)("button",{className:"btn prev",title:"".concat(1+30*(t-2)," - ").concat(30*(t-1)),type:"button",onClick:function(){c(-1)},children:"\u2039 Show previous 30 followers"}),r[1]&&Object(z.jsx)("button",{className:"btn next",title:"".concat(1+30*t," - ").concat(30*(t+1)),type:"button",onClick:function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(n,r[0]);case 2:t=e.sent,console.log("page: nextclick",t),t&&a(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),c(1)},children:"Show more followers \u203a"})]})};function R(e){var n,t=(n=h(),{setNewUser:function(e){return n(M(e))},setFollowersPage:function(e){return n(J(e))},setNameType:function(e){return n(Q(e))}}),r=t.setNewUser,a=t.setFollowersPage,c=t.setNameType,s=Object(o.useRef)(null),l=Object(o.useState)(),f=Object(d.a)(l,2),v=f[0],b=f[1],g=Object(o.useState)(""),j=Object(d.a)(g,2),w=j[0],m=j[1],x=p(U);function O(){return(O=Object(i.a)(u.a.mark((function e(n){var t,o,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("formInput: ",null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.value),a=null===(o=s.current)||void 0===o?void 0:o.value,v!==a){e.next=5;break}return e.abrupt("return");case 5:a&&b(a),a&&r(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){v&&function(){var e=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(v,undefined);case 3:(n=e.sent)&&a(n),m(""),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error 456: ",e.t0),m(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[v]),Object(z.jsxs)("main",{children:[Object(z.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(z.jsx)("input",{className:"input",type:"text",ref:s,placeholder:"Enter github login name"}),Object(z.jsx)("button",{className:"btn btn--primary",children:"Display followers"}),Object(z.jsxs)("div",{className:"checkbox-wpr",children:[Object(z.jsx)("input",{className:"checkbox",type:"checkbox",id:"cb",onChange:function(){c(!x)}}),Object(z.jsx)("label",{className:"",htmlFor:"cb",children:"Login Names"}),Object(z.jsx)("label",{htmlFor:"cb",children:"Account Names"})]})]}),Object(z.jsx)(K,{}),""!==w.toString()?Object(z.jsx)("div",{className:"error-msg",children:w.toString()}):Object(z.jsx)(G,{})]})}t(57);var Y=function(){return Object(z.jsx)(R,{})},_=Object(I.a)({reducer:{homePage:W}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=t(70);s.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(f.a,{store:_,children:Object(z.jsx)(H.a,{client:N,children:Object(z.jsx)(Y,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.45ee3f3e.chunk.js.map