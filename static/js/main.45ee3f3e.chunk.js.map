{"version":3,"sources":["app/hooks.ts","app/graphql/index.ts","app/services/queries.ts","app/services/githubService/index.ts","app/containers/utlis/fetch.ts","app/containers/HomePage/homePageSlice.ts","app/components/Followers.tsx","app/components/Pagination.tsx","app/containers/HomePage/index.tsx","App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","httpLink","createHttpLink","uri","authLink","setContext","_","headers","authorization","process","apolloClient","ApolloClient","link","concat","cache","InMemoryCache","GET_FOLLOWERS","gql","user","a","cursor","undefined","query","variables","response","data","console","log","Error","fetchFollowers","githubService","getFollowers","catch","err","page","names","followers","edges","map","edge","node","login","name","endCursor","pageInfo","hasNextPage","HomePageSlice","createSlice","initialState","followersPages","isAccountName","depth","reducers","addUser","state","action","payload","addFollowersPage","updateDepth","updateNameType","selectUser","homePage","selectNameType","selectDepth","selectCurrentNames","selectPaginationInfo","actions","Followers","isAccountNames","listStyle","className","length","style","follower","Pagination","dispatch","paginationInfo","setFollowersPage","setDepth","num","title","type","onClick","fetch","HomePage","props","setNewUser","obj","setNameType","userRef","useRef","useState","setUser","errorMsg","setErrorMsg","isAcccountNames","e","preventDefault","current","value","formInput","useEffect","onSubmit","ref","placeholder","id","onChange","htmlFor","toString","App","store","configureStore","reducer","homePageSlice","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","ApolloProvider","client","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.45ee3f3e.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { ApolloClient, createHttpLink, InMemoryCache } from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\n\nconst TOKEN = process.env.REACT_APP_TOKEN;\n\nconst httpLink = createHttpLink({\n  uri: 'https://api.github.com/graphql',\n});\n\nconst authLink = setContext((_, { headers }) => {\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: `Bearer ${TOKEN}`,\n    },\n  };\n});\n\nexport const apolloClient = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache(),\n});\n","import gql from 'graphql-tag';\n\nexport const GET_FOLLOWERS = gql`\n  query GetFollowers($user: String!, $cursor: String) {\n    user(login: $user) {\n      followers(first: 30, after: $cursor) {\n        totalCount\n        edges {\n          node {\n            login\n            name\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n`;\n","import { GetFollowers } from '../--tagname=gql/GetFollowers';\nimport { apolloClient } from '../../graphql';\nimport { GET_FOLLOWERS } from '../queries';\nclass GithubService {\n  static getFollowers(user: string, cursor: string | undefined) {\n    throw new Error('Method not implemented.');\n  }\n  async getFollowers(\n    user: string,\n    cursor: string | undefined = undefined\n  ): Promise<GetFollowers['user']> {\n    try {\n      const response = await apolloClient.query({\n        query: GET_FOLLOWERS,\n        variables: { user, cursor },\n      });\n      if (!response || !response.data) {\n        console.log('response: ', response);\n        throw new Error('Cannot get followers');\n      }\n      return response.data.user;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nexport default new GithubService();\n","import { GetFollowers_user } from '../../services/--tagname=gql/GetFollowers';\nimport githubService from '../../services/githubService';\nimport { IPaginationPage } from '../HomePage/types';\n\nexport const fetchFollowers = async (user: string, cursor: any) => {\n  // console.log('getfollowers(user,cursor): ', user, cursor);\n  const response: void | GetFollowers_user | null = await githubService\n    .getFollowers(user, cursor)\n    .catch((err) => {\n      throw err;\n    });\n\n  if (!response) return;\n\n  // console.log('Response: ', response);\n  let page: IPaginationPage = {\n    names: response?.followers?.edges?.map((edge) => [\n      edge?.node?.login,\n      edge?.node?.name,\n    ]),\n    endCursor: response?.followers?.pageInfo?.endCursor,\n    hasNextPage: response?.followers?.pageInfo?.hasNextPage,\n  };\n\n  return page;\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport { RootState } from '../../store';\nimport { IHomePageState } from './types';\n\nexport const initialState: IHomePageState = {\n  followersPages: [],\n  user: '',\n  isAccountName: false,\n  depth: 1,\n};\n\nconst HomePageSlice = createSlice({\n  name: 'homePage',\n  initialState,\n  reducers: {\n    addUser: (state, action) => {\n      state.user = action.payload;\n      state.followersPages = [];\n      state.depth = 1;\n    },\n    addFollowersPage: (state, action) => {\n      state.followersPages = [...state.followersPages, action.payload];\n    },\n    updateDepth: (state, action) => {\n      state.depth += action.payload;\n    },\n    updateNameType: (state, action) => {\n      state.isAccountName = action.payload;\n    },\n  },\n});\n\nexport const selectUser = (state: RootState) => state.homePage.user;\nexport const selectNameType = (state: RootState) =>\n  state.homePage.isAccountName;\nexport const selectDepth = (state: RootState) => state.homePage.depth;\nexport const selectCurrentNames = (state: RootState) =>\n  state.homePage?.followersPages?.[state.homePage.depth - 1]?.names;\nexport const selectPaginationInfo = (state: RootState) => [\n  state.homePage.followersPages?.[state.homePage.depth - 1]?.endCursor,\n  state.homePage.followersPages?.[state.homePage.depth - 1]?.hasNextPage,\n];\n\nexport const { addUser, addFollowersPage, updateDepth, updateNameType } =\n  HomePageSlice.actions;\nexport default HomePageSlice.reducer;\n","import React from 'react';\n\nimport { useAppSelector } from '../hooks';\nimport {\n  selectUser,\n  selectCurrentNames,\n  selectNameType,\n  selectDepth,\n} from '../containers/HomePage/homePageSlice';\n\nfunction Followers() {\n  const user = useAppSelector(selectUser);\n  const names = useAppSelector(selectCurrentNames);\n  const isAccountNames = useAppSelector(selectNameType);\n  const depth = useAppSelector(selectDepth);\n  var listStyle = { '--start-count': 30 * (depth - 1) } as React.CSSProperties;\n\n  return (\n    <ol\n      className={`followers ${names?.length === 0 ? 'followers--empty' : ''}`}\n      style={listStyle}\n    >\n      {names?.length === 0 && (\n        <div>Unfortunately {user} currently doesn't have any followers ðŸ˜¢</div>\n      )}\n      {names?.map((follower) => (\n        <li\n          className={`follower ${\n            isAccountNames && !follower[1] ? 'follower-empty' : ''\n          }`}\n          key={follower[0]}\n        >\n          {isAccountNames\n            ? follower[1] || '- No name specified -'\n            : follower[0]}\n        </li>\n      ))}\n    </ol>\n  );\n}\n\nexport default Followers;\n","import React from 'react';\nimport { Dispatch } from 'redux';\nimport { useAppDispatch, useAppSelector } from '../hooks';\nimport {\n  addFollowersPage,\n  updateDepth,\n  selectUser,\n  selectDepth,\n  selectPaginationInfo,\n} from '../containers/HomePage/homePageSlice';\nimport { IPaginationPage } from '../containers/HomePage/types';\nimport { fetchFollowers } from '../containers/utlis/fetch';\n\nconst actionDispatch = (dispatch: Dispatch) => ({\n  setFollowersPage: (page: IPaginationPage) => dispatch(addFollowersPage(page)),\n  setDepth: (num: number) => dispatch(updateDepth(num)),\n});\n\nfunction Pagination() {\n  const user = useAppSelector(selectUser);\n  const depth = useAppSelector(selectDepth);\n  const paginationInfo = useAppSelector(selectPaginationInfo);\n  const { setFollowersPage, setDepth } = actionDispatch(useAppDispatch());\n\n  function handlePrevClick() {\n    setDepth(-1);\n  }\n\n  function handleNextClick() {\n    const fetch = async function () {\n      let page = await fetchFollowers(user, paginationInfo[0]);\n      console.log('page: nextclick', page);\n      if (page) setFollowersPage(page);\n    };\n    fetch();\n    setDepth(1);\n  }\n\n  return (\n    <div className='pagination-buttons'>\n      {depth > 1 && (\n        <button\n          className='btn prev'\n          title={`${1 + 30 * (depth - 2)} - ${30 * (depth - 1)}`}\n          type='button'\n          onClick={handlePrevClick}\n        >\n          &lsaquo; Show previous 30 followers\n        </button>\n      )}\n      {paginationInfo[1] && (\n        <button\n          className='btn next'\n          title={`${1 + 30 * depth} - ${30 * (depth + 1)}`}\n          type='button'\n          onClick={handleNextClick}\n        >\n          Show more followers &rsaquo;\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default Pagination;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Dispatch } from 'redux';\nimport { useAppDispatch, useAppSelector } from '../../hooks';\nimport { fetchFollowers } from '../utlis/fetch';\nimport {\n  addUser,\n  addFollowersPage,\n  updateNameType,\n  selectNameType,\n} from './homePageSlice';\nimport { IPaginationPage } from './types';\nimport Followers from '../../components/Followers';\nimport Pagination from '../../components/Pagination';\n\ninterface IHomePageProps {}\n\nconst actionDispatch = (dispatch: Dispatch) => ({\n  setNewUser: (obj: any) => dispatch(addUser(obj)),\n  setFollowersPage: (page: IPaginationPage) => dispatch(addFollowersPage(page)),\n  setNameType: (type: boolean) => dispatch(updateNameType(type)),\n});\n\nexport function HomePage(props: IHomePageProps) {\n  const { setNewUser, setFollowersPage, setNameType } = actionDispatch(\n    useAppDispatch()\n  );\n  const userRef = useRef<HTMLInputElement>(null);\n  const [user, setUser] = useState<string>();\n  const [errorMsg, setErrorMsg] = useState<string>('');\n  const isAcccountNames = useAppSelector(selectNameType);\n\n  useEffect(() => {\n    let cursor: string | undefined = undefined;\n    if (!user) return;\n    const fetch = async function () {\n      try {\n        let page = await fetchFollowers(user, cursor);\n        // console.log('page', page);\n        if (page) setFollowersPage(page);\n        setErrorMsg('');\n      } catch (error) {\n        console.log('error 456: ', error);\n        setErrorMsg(error);\n      }\n    };\n    fetch();\n  }, [user]);\n\n  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n\n    console.log('formInput: ', userRef?.current?.value);\n    const formInput = userRef.current?.value;\n    if (user === formInput) return; // same user so nothing to do\n    formInput && setUser(formInput);\n    formInput && setNewUser(formInput);\n  }\n\n  function handleNameToggle() {\n    setNameType(!isAcccountNames);\n  }\n\n  return (\n    <main>\n      <form onSubmit={handleSubmit}>\n        <input\n          className='input'\n          type='text'\n          ref={userRef}\n          placeholder='Enter github login name'\n        />\n        <button className='btn btn--primary'>Display followers</button>\n        <div className='checkbox-wpr'>\n          <input\n            className='checkbox'\n            type='checkbox'\n            id='cb'\n            onChange={handleNameToggle}\n          />\n          <label className='' htmlFor='cb'>\n            Login Names\n          </label>\n          <label htmlFor='cb'>Account Names</label>\n        </div>\n      </form>\n      <Pagination />\n      {errorMsg.toString() !== '' ? (\n        <div className='error-msg'>{errorMsg.toString()}</div>\n      ) : (\n        <Followers />\n      )}\n    </main>\n  );\n}\n","import React from 'react';\nimport { HomePage } from './app/containers/HomePage';\nimport './App.css';\n\nfunction App() {\n  return <HomePage />;\n}\n\nexport default App;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport homePageSlice from './containers/HomePage/homePageSlice';\n// import counterReducer from '../features/counter/counterSlice';\n\nexport const store = configureStore({\n  reducer: {\n    homePage: homePageSlice,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport { ApolloProvider } from '@apollo/client';\nimport { apolloClient } from './app/graphql';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ApolloProvider client={apolloClient}>\n        <App />\n      </ApolloProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}